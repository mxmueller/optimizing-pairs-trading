<!DOCTYPE html>
<html lang="en-us"
  dir="ltr">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width">








    






<link rel="icon" type="image/ico" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="192x192" href="http://localhost:1313/android-chrome-192x192.png">
<link rel="apple-touch-icon" sizes="180x180" href="http://localhost:1313/apple-touch-icon.png">

<meta name="description" content=""/>



<title>
    
    Backtesting Demonstrator Setup Guide | Exploring Machine Learning Optimizatios for Pair Selection in Pairs Trading
    
</title>

<link rel="canonical" href="http://localhost:1313/setup/"/>

<meta property="og:url" content="http://localhost:1313/setup/">
  <meta property="og:site_name" content="Exploring Machine Learning Optimizatios for Pair Selection in Pairs Trading">
  <meta property="og:title" content="Backtesting Demonstrator Setup Guide">
  <meta property="og:description" content="The microservices architecture demonstrates a complete backtesting pipeline for pairs trading strategies. Each service fulfills a specific role in the data processing and analysis workflow.
The Notebook Runner (notebook_runner) service leverages papermill to execute all possible permutations of pair-finding algorithms and trading strategies through parameterized Jupyter notebooks. This allows for systematic generation and testing of different strategy combinations across various market conditions. The MinIO blob storage service serves as the central data repository, containing both the theoretical results presented in the research and raw market data. Additionally, all newly generated strategy runs are automatically stored here, creating a comprehensive historical record of backtesting results. The Analytics (analytics) service processes trade data from the blob storage along with raw market data to calculate comprehensive performance metrics. This backend service handles all computational-heavy operations including risk metrics, return calculations, and portfolio statistics. The Streamlit application provides a unified interface for data visualization, performance analysis, and strategy management. Users can explore raw data, examine trading results, analyze performance metrics, and commission new notebook runs directly through the web interface. All services are located under src/backtester/services/ and communicate through REST APIs and shared storage.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">












<link rel="stylesheet" href="/assets/combined.min.0d41f7df4b254b9ea5ad925d84046d60c8636d6630d18497be726888dbd86312.css" media="all">











    




</head>







<body class="light">

  <div class="content">
    <header>
      

<div class="header">

    

    <h1 class="header-title">
        <a href="http://localhost:1313/">Exploring Machine Learning Optimizatios for Pair Selection in Pairs Trading</a>
    </h1>

    <div class="header-menu">
        

        
        

        <p
            class="small ">
            <a href="/docs" >
                /Docs
            </a>
        </p>
        

        <p
            class="small ">
            <a href="/results/" >
                /Results
            </a>
        </p>
        

        <p
            class="small ">
            <a href="/setup/" >
                /Setup
            </a>
        </p>
        

        <p
            class="small ">
            <a href="/backtester/" >
                /Backtester
            </a>
        </p>
        
        
    </div>

    

</div>

    </header>

    <main class="main">
      




<div class="breadcrumbs"><a href="/">Home</a><span class="breadcrumbs-separator">/</span>
        <a href="/setup/">Backtesting Demonstrator Setup Guide</a></div>


<div >
  <article>
    <header class="single-intro-container">
        
        <h1 class="single-title">Backtesting Demonstrator Setup Guide</h1>
        
        <div class="single-subsummary">
          
          <div>
            
            <p class="single-date">
              5 min read
            </p>
          </div>
        </div>
        
    </header>
    
    <div class="single-content">
      <p>The microservices architecture demonstrates a complete backtesting pipeline for pairs trading strategies. Each service fulfills a specific role in the data processing and analysis workflow.</p>
<figure><img src="/images/archi.drawio.png" width="800">
</figure>

<p>The <strong>Notebook Runner</strong> (<code>notebook_runner</code>) service leverages papermill to execute all possible permutations of pair-finding algorithms and trading strategies through parameterized Jupyter notebooks. This allows for systematic generation and testing of different strategy combinations across various market conditions. The <strong>MinIO</strong> blob storage service serves as the central data repository, containing both the theoretical results presented in the research and raw market data. Additionally, all newly generated strategy runs are automatically stored here, creating a comprehensive historical record of backtesting results. The <strong>Analytics</strong> (<code>analytics</code>) service processes trade data from the blob storage along with raw market data to calculate comprehensive performance metrics. This backend service handles all computational-heavy operations including risk metrics, return calculations, and portfolio statistics. The <strong>Streamlit</strong> application provides a unified interface for data visualization, performance analysis, and strategy management. Users can explore raw data, examine trading results, analyze performance metrics, and commission new notebook runs directly through the web interface. All services are located under <code>src/backtester/services/</code> and communicate through REST APIs and shared storage.</p>
<h2 class="heading" id="quick-setup">
  Quick Setup
  <a class="anchor" href="#quick-setup">#</a>
</h2>
<p>The following steps will deploy the complete backtesting environment with all required services and pre-configured data. The initial setup automatically provisions MinIO storage, loads market data, and prepares the analytical backend for immediate use.</p>
<p><strong>Clone Repository</strong></p>
<p>Download the complete project repository including all submodules and navigate to the project directory.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git clone --recurse-submodules https://github.com/mxmueller/optimizing-pairs-trading
</span></span><span style="display:flex;"><span><span style="font-weight:bold;font-style:italic">cd</span> optimizing-pairs-trading
</span></span></code></pre></div><p><strong>Verify Docker Installation</strong></p>
<p>Ensure Docker and Docker Compose are properly installed on your system before proceeding with the deployment.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker --version
</span></span><span style="display:flex;"><span>docker compose version
</span></span></code></pre></div><p><strong>Start Services</strong></p>
<p>The Docker Compose configuration handles service dependencies and health checks automatically. MinIO will initialize first, followed by the analytics backend, notebook runner, and finally the Streamlit frontend. The initial startup may take several minutes as Docker builds images and provisions storage.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker-compose up --build --detach
</span></span></code></pre></div><p><strong>Verify Deployment</strong></p>
<p>Monitor the deployment progress and ensure all services reach healthy status. The MinIO service includes a health check that verifies data loading completion before dependent services start.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker-compose ps
</span></span></code></pre></div><p>All services should show <code>healthy</code> or <code>running</code> status.</p>
<h2 class="heading" id="service-access">
  Service Access
  <a class="anchor" href="#service-access">#</a>
</h2>
<p>The following services will be available once deployment completes. Each service provides different capabilities for strategy development, backtesting, and analysis. Access credentials for MinIO are configured in the setup and can be modified in the configuration file.</p>

<div class="table-outer">
    <table>
        <thead>
            <tr>
                <th>Service</th>
                <th>URL</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><strong>Streamlit</strong></td>
                <td>http://localhost:8501</td>
            </tr>
            <tr>
                <td><strong>Analytics API</strong></td>
                <td>http://localhost:8000/docs</td>
            </tr>
            <tr>
                <td><strong>Notebook Runner API</strong></td>
                <td>http://localhost:8080/docs</td>
            </tr>
            <tr>
                <td><strong>MinIO Console</strong></td>
                <td>http://localhost:9001</td>
            </tr>
        </tbody>
    </table>
</div><hr>
<h2 class="heading" id="troubleshooting">
  Troubleshooting
  <a class="anchor" href="#troubleshooting">#</a>
</h2>
<p>Common deployment issues often relate to Docker resource constraints, port conflicts, or data file accessibility. The containerized architecture includes health checks and dependency management, but initial setup may require troubleshooting depending on your local environment configuration.</p>
<p><strong>Service Won&rsquo;t Start</strong></p>
<p>Check service logs and restart individual services if needed to resolve startup issues.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#888;font-style:italic"># Check logs</span>
</span></span><span style="display:flex;"><span>docker-compose logs [service-name]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#888;font-style:italic"># Restart specific service</span>
</span></span><span style="display:flex;"><span>docker-compose restart [service-name]
</span></span></code></pre></div><p><strong>Data Not Loading</strong></p>
<p>Verify data files exist in the expected locations and check file permissions and configuration settings.</p>
<ul>
<li>Verify data files exist in <code>./data/</code> directory</li>
<li>Check file paths in <code>config.yaml</code> match actual structure</li>
<li>Ensure MinIO has read access to mounted volumes</li>
</ul>
<p><strong>Port Conflicts</strong></p>
<p>Modify port mappings in the Docker Compose configuration if default ports are already in use.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>ports:
</span></span><span style="display:flex;"><span>  - <span style="color:#666;font-style:italic">&#34;8501:8501&#34;</span>  <span style="color:#888;font-style:italic"># Change first number only</span>
</span></span></code></pre></div><hr>
<h2 class="heading" id="configuration-expert-mode">
  Configuration (Expert Mode)
  <a class="anchor" href="#configuration-expert-mode">#</a>
</h2>
<p>The system configuration is centralized in a single YAML file that defines storage locations, access credentials, and data mapping between the host filesystem and MinIO buckets. This configuration drives the automatic setup process and determines how market data and strategies are organized within the storage layer.</p>
<p><strong>Basic Configuration (config.yaml)</strong></p>
<p>The configuration file maps local data sources to MinIO bucket structures and includes metadata for strategy classification. Each market requires both raw price data and any pre-computed trading strategies that should be loaded during initialization.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>minio:
</span></span><span style="display:flex;"><span>  user: minioadmin
</span></span><span style="display:flex;"><span>  password: minioadmin
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>storage:
</span></span><span style="display:flex;"><span>  base_bucket: markets
</span></span><span style="display:flex;"><span>  markets:
</span></span><span style="display:flex;"><span>    - name: FTSE100
</span></span><span style="display:flex;"><span>      data_file: market_data.parquet
</span></span><span style="display:flex;"><span>      data_path: /host-data/raw/ftse_daily.parquet
</span></span><span style="display:flex;"><span>      strategies:
</span></span><span style="display:flex;"><span>        - file: Cluster_Bollinger_Sliding.parquet
</span></span><span style="display:flex;"><span>          source_path: /host-data/results/ftse100/Cluster_Bollinger_Sliding.parquet
</span></span><span style="display:flex;"><span>          type: Bollinger
</span></span><span style="display:flex;"><span>          description: Cluster Bollinger Sliding Strategy
</span></span><span style="display:flex;"><span>          pair_finding: Clustering
</span></span></code></pre></div><p><strong>Required Data Structure</strong></p>
<p>The host filesystem must be organized according to the expected directory structure. Raw market data files contain OHLCV price series for all symbols in each market, while the results directory stores pre-computed strategy outputs from previous backtesting runs.</p>
<pre tabindex="0"><code>data/                                    
├── raw/
│   ├── ftse_daily.parquet              
│   └── nasdaq_daily.parquet
└── results/
    ├── ftse100/                        
    │   ├── Cluster_Bollinger_Sliding.parquet
    │   ├── Cluster_Z-Score_Sliding.parquet
    │   └── ...
    └── nasdaq100/
        └── ...
</code></pre><p><strong>MinIO Storage Layout</strong></p>
<p>The MinIO object storage organizes data in a hierarchical bucket structure that mirrors the analytical requirements of the backtesting system. Each market maintains its own namespace with dedicated areas for raw data and strategy results.</p>
<pre tabindex="0"><code>markets/                                
├── FTSE100/
│   ├── market_data.parquet            
│   └── strategies/
│       ├── strategy1.parquet          
│       └── strategy2.parquet
└── NASDAQ100/
    ├── market_data.parquet
    └── strategies/
        └── ...
</code></pre><p>Strategy files within MinIO include embedded metadata tags that classify the pair-finding algorithm (Clustering, Distance-based, Correlation), trading strategy type (Bollinger, Z-Score, Cointegration), and descriptive information for analysis workflows.</p>
<h2 class="heading" id="custom-markets">
  Custom Markets
  <a class="anchor" href="#custom-markets">#</a>
</h2>
<p>The system supports dynamic addition of new markets through configuration updates. Adding custom markets enables backtesting strategies across different geographical regions, market segments, or asset classes. The process requires preparing market data in the expected format and updating the central configuration to register the new market with the storage and analytical services.</p>
<p>To add new markets, update <code>config.yaml</code>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>storage:
</span></span><span style="display:flex;"><span>  markets:
</span></span><span style="display:flex;"><span>    - name: SP500
</span></span><span style="display:flex;"><span>      data_file: market_data.parquet
</span></span><span style="display:flex;"><span>      data_path: /host-data/raw/sp500_daily.parquet
</span></span><span style="display:flex;"><span>      strategies: []  <span style="color:#888;font-style:italic"># Initially empty, strategies added via notebook runs</span>
</span></span></code></pre></div><p>Place corresponding data file in <code>./data/raw/</code> and restart services. The market data should follow the standardized schema with date indexing and symbol-based columns for OHLCV data. Once registered, the new market becomes available for strategy generation through the notebook runner and analysis through the Streamlit interface.</p>
<h2 class="heading" id="development">
  Development
  <a class="anchor" href="#development">#</a>
</h2>
<p>The containerized development environment supports real-time code changes and debugging across all services. Log aggregation and service introspection capabilities facilitate development workflows and system monitoring during strategy development and testing phases.</p>
<p><strong>Accessing Service Logs</strong></p>
<p>View real-time logs from any service to monitor system behavior and debug issues.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker-compose logs -f [service-name]
</span></span></code></pre></div><p><strong>Rebuilding After Changes</strong></p>
<p>Rebuild and restart services after making code changes to the application.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker-compose down
</span></span><span style="display:flex;"><span>docker-compose up --build
</span></span></code></pre></div><p><strong>Direct Service Access</strong></p>
<p>Execute commands directly inside running containers for debugging and development tasks.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#888;font-style:italic"># Execute commands in running container</span>
</span></span><span style="display:flex;"><span>docker-compose <span style="font-weight:bold;font-style:italic">exec</span> analytics bash
</span></span><span style="display:flex;"><span>docker-compose <span style="font-weight:bold;font-style:italic">exec</span> streamlit bash
</span></span></code></pre></div>
    </div>
  </article>

  

  

  
  

<div class="single-pagination">
    <hr />

    <div class="flexnowrap">

        <div class="single-pagination-prev">
            
            <div class="single-pagination-container-prev">
                <div class="single-pagination-text">←</div>
                <div class="single-pagination-text">
                    <a href="/results/">
                        Results
                    </a>
                </div>
            </div>
            
        </div>

        <div class="single-pagination-next">
            
            <div class="single-pagination-container-next">
                <div class="single-pagination-text">
                    <a href="/backtester/">
                        Backtester
                    </a>
                </div>
                <div class="single-pagination-text">→</div>
            </div>
            
        </div>

    </div>

    <hr />
</div>



  

  

  
  <div class="back-to-top">
    <a href="#top">
      back to top
    </a>
  </div>
  

</div>


    </main>
  </div>

  
  





    




  <footer>
    

    
    





    




    
    <p>Powered by
        <a href="https://gohugo.io/">Hugo</a>
        and
        <a href="https://github.com/tomfran/typo">tomfran/typo</a>
    </p>
    
    
    


  </footer>

  
  <link rel="stylesheet" 
  href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css">
  
<script defer 
  src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script>

<script defer
  src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"
  onload="renderMathInElement(document.body);"></script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    renderMathInElement(document.body, {
      delimiters: [
        { left: "$$", right: "$$", display: true },
        { left: "$", right: "$", display: false }
      ]
    });
  });
</script>
  
</body>

<script src="/js/theme-switch.js"></script>
<script defer src="/js/copy-code.js"></script>
</html>
